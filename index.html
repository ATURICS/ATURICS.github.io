<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-recommend" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/15/recommend/" class="article-date">
  <time datetime="2019-08-15T13:36:42.000Z" itemprop="datePublished">2019-08-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/15/recommend/">一些好用的软件/网址推荐!</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h1><h2 id="1-vscode"><a href="#1-vscode" class="headerlink" title="1.$vscode$"></a>1.$vscode$</h2><p>自从拥有了它，我果断抛弃了$Dev$。</p>
<p>但它不带编译环境，有点麻烦。</p>
<p><a href="https://www.cnblogs.com/TAMING/p/8560253.html" target="_blank" rel="noopener">c++编译环境-$tangming$</a></p>
<p>它的高亮是真的很漂亮，主题也非常多，可以在扩展商店下载。</p>
<p>冰与火之歌$Winter;is;coming$</p>
<p>哈利波特$Hogwarts$都贼靓！</p>
<p>原著党蠢蠢欲动</p>
<p>下面是<del>史上最骚</del>$Nebula$主题的演示</p>
<p><img src="recommend/vscode.PNG" alt></p>
<h2 id="2-X-Mind"><a href="#2-X-Mind" class="headerlink" title="$2.X-Mind$"></a>$2.X-Mind$</h2><p>简洁大气的思维导图制作软件。</p>
<p>正版要付费的。</p>
<p><img src="recommend/XMind.PNG" alt></p>
<h2 id="3-Notability"><a href="#3-Notability" class="headerlink" title="$3.Notability$"></a>$3.Notability$</h2><p><a href="https://post.smzdm.com/p/698414/" target="_blank" rel="noopener">$Mac$笔记推介</a></p>
<p>这个记笔记绝佳。但本人是手写党，不太爱这个。</p>
<p><del>其实是太贵了</del></p>
<h1 id="网址"><a href="#网址" class="headerlink" title="网址"></a>网址</h1><h2 id="1-LibreOJ"><a href="#1-LibreOJ" class="headerlink" title="$1.LibreOJ$"></a>$1.LibreOJ$</h2><p>页面简洁，还可以无限下数据<del>某咕该学学这个</del></p>
<h2 id="2-Github-And-its-Blog"><a href="#2-Github-And-its-Blog" class="headerlink" title="$2.Github;And;its;Blog$"></a>$2.Github;And;its;Blog$</h2><p>一介凡人开发不了项目，但github的博客搭配hexo食用，是拥有个人网站最经济实惠的方式。</p>
<p>主题推荐使用NexT的Gemini。</p>
<p>下面推荐几个教程。</p>
<p><a href="https://ouuan.github.io/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%8C%87%E5%8C%97/" target="_blank" rel="noopener">hexo博客搭建指北-$ouuan$</a></p>
<p><a href="https://blog.csdn.net/sinat_37781304/article/details/82729029" target="_blank" rel="noopener">hexo史上最全搭建教程-$zjufangzh$</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/15/recommend/" data-id="cjzgyf5jx0004scqdkqbm6diz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HexoFixed" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/15/HexoFixed/" class="article-date">
  <time datetime="2019-08-15T07:37:20.000Z" itemprop="datePublished">2019-08-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/15/HexoFixed/">hexo修复笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="最初…"><a href="#最初…" class="headerlink" title="最初…"></a>最初…</h2><p>鄙人不会高级操作，在别的电脑上搞好博客之后就直接把文件夹复制过来了。</p>
<p>没想到遇到了几个问题，度过了濒临崩溃的两天终于解决，记述于此。</p>
<h2 id="1-nodejs-command-not-found"><a href="#1-nodejs-command-not-found" class="headerlink" title="$1.nodejs:;command;not;found$"></a>$1.nodejs:;command;not;found$</h2><p>调了一下环境变量。</p>
<p>用户变量Path改为</p>
<p>D:\Program Files\nodejs\node_global\</p>
<p>或者C:\Users\dguser\Desktop\你的博客文件夹\node_modules.bin</p>
<p>或许两个都要</p>
<h2 id="2-hexo"><a href="#2-hexo" class="headerlink" title="$2.hexo$"></a>$2.hexo$</h2><p>一输入和hexo有关的命令就会输出这个</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\dguser\Desktop\myBlog\ATURICS.github.io\node_modules\nanomatch\index.js:<span class="number">243</span> nanomatch.every = ftn tion(<span class="built_in">list</span>,peUdgrns$ Ottioos  &#123;</span><br><span class="line">^</span><br><span class="line"></span><br><span class="line">SyntaxError: Invalid <span class="keyword">or</span> unexpected token</span><br><span class="line">at Module._compile (internal/modules/cjs/loader.js:<span class="number">723</span>:<span class="number">23</span>)</span><br><span class="line">at Object.Module._extensions..js (internal/modules/cjs/loader.js:<span class="number">789</span>:<span class="number">10</span>)</span><br><span class="line">at Module.load (internal/modules/cjs/loader.js:<span class="number">653</span>:<span class="number">32</span>)</span><br><span class="line">at tryModuleLoad (internal/modules/cjs/loader.js:<span class="number">593</span>:<span class="number">12</span>)</span><br><span class="line">at Function.Module._load (internal/modules/cjs/loader.js:<span class="number">585</span>:<span class="number">3</span>)</span><br><span class="line">at Module.require (internal/modules/cjs/loader.js:<span class="number">692</span>:<span class="number">17</span>)</span><br><span class="line">at require (internal/modules/cjs/helpers.js:<span class="number">25</span>:<span class="number">18</span>)</span><br><span class="line">at Object. (C:\Users\dguser\Desktop\myBlog\ATURICS.github.io\node_modules\micromatch\lib\compilers.js:<span class="number">3</span>:<span class="number">17</span>)</span><br><span class="line">at Module._compile (internal/modules/cjs/loader.js:<span class="number">778</span>:<span class="number">30</span>)</span><br><span class="line">at Object.Module._extensions..js (internal/modules/cjs/loader.js:<span class="number">789</span>:<span class="number">10</span>)</span><br><span class="line">at Module.load (internal/modules/cjs/loader.js:<span class="number">653</span>:<span class="number">32</span>)</span><br><span class="line">at tryModuleLoad (internal/modules/cjs/loader.js:<span class="number">593</span>:<span class="number">12</span>)</span><br><span class="line">at Function.Module._load (internal/modules/cjs/loader.js:<span class="number">585</span>:<span class="number">3</span>)</span><br><span class="line">at Module.require (internal/modules/cjs/loader.js:<span class="number">692</span>:<span class="number">17</span>)</span><br><span class="line">at require (internal/modules/cjs/helpers.js:<span class="number">25</span>:<span class="number">18</span>)</span><br><span class="line">at Object. (C:\Users\dguser\Desktop\myBlog\ATURICS.github.io\node_modules\micromatch\index.js:<span class="number">16</span>:<span class="number">17</span>)`</span><br></pre></td></tr></table></figure>

<p><a href="https://www.luogu.org/discuss/show/135896" target="_blank" rel="noopener">提问链接1-洛谷</a></p>
<p><a href="https://blog.csdn.net/weixin_42470791/article/details/82833415" target="_blank" rel="noopener">$CSDN$</a></p>
<p>这些建议中的一个或多个解决了我的问题，在此衷心感谢。</p>
<h2 id="3-hexo-d"><a href="#3-hexo-d" class="headerlink" title="$3.hexo;d$"></a>$3.hexo;d$</h2><p><a href="https://www.luogu.org/discuss/show/135956?page=2" target="_blank" rel="noopener">提问链接2-洛谷</a></p>
<p>每次执行hexo d</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">INFO  Deploying: git</span><br><span class="line">INFO  Clearing .deploy_git folder...</span><br><span class="line">INFO  Copying files from public folder...</span><br><span class="line">INFO  Copying files from extend dirs...</span><br><span class="line">warning: LF will be replaced by CRLF in 2019/08/06/模拟退火（SA）学习笔记/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in 2019/08/07/Hexo-NexT主题搭建笔记/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">warning: LF will be replaced by CRLF in 2019/08/07/洛谷P3177 [HAOI2015]树上染色/index.html.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">error: inflate: data stream error (invalid distance too far back)</span><br><span class="line">error: corrupt loose object &apos;5ec2e21b772abf9d4ee09bd363ad7f1f5ae4b035&apos;</span><br><span class="line">fatal: loose object 5ec2e21b772abf9d4ee09bd363ad7f1f5ae4b035 (stored in .git/objects/5e/c2e21b772abf9d4ee09bd363ad7f1f5ae4b035) is corrupt</span><br><span class="line">FATAL Something&apos;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">Error: Spawn failed</span><br><span class="line">    at ChildProcess.&lt;anonymous&gt; (C:\Users\dguser\Desktop\myBlog\ATURICS.github.io\node_modules\hexo-util\lib\spawn.js:52:19)</span><br><span class="line">    at ChildProcess.emit (events.js:198:13)</span><br><span class="line">    at ChildProcess.cp.emit (C:\Users\dguser\Desktop\myBlog\ATURICS.github.io\node_modules\cross-spawn\lib\enoent.js:40:29)</span><br><span class="line">    at Process.ChildProcess._handle.onexit (internal/child_process.js:248:12)</span><br></pre></td></tr></table></figure>

<p>感谢code004大佬的耐心指导。</p>
<h2 id="4-Gitalk-Error-Not-Found"><a href="#4-Gitalk-Error-Not-Found" class="headerlink" title="$4.Gitalk;Error:Not;Found$"></a>$4.Gitalk;Error:Not;Found$</h2><p>在上面的提问链接2中code004大佬也帮助解决了这个问题。</p>
<p>我的锅和别人不太一样</p>
<p><img src="HexoFixed/me.PNG" alt></p>
<p>Gitalk那些要求你填的用户名都是上面那个加粗的。</p>
<p>我原来上面那个名字是八声甘州，后来改了就好了……反正把两个改成一样的保险。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/15/HexoFixed/" data-id="cjzgyf5js0001scqdywidqbd8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Test-2019-8-7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/08/Test-2019-8-7/" class="article-date">
  <time datetime="2019-08-08T09:06:53.000Z" itemprop="datePublished">2019-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/08/Test-2019-8-7/">Test2019.8.7</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Description"><a href="#Description" class="headerlink" title="$Description$"></a>$Description$</h2><p>给出一个$01$矩阵，求次大全$1$矩阵。</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="$Solution$"></a>$Solution$</h2><p>$20pts$</p>
<p>暴力枚举矩形的左上角和右下角直接统计，$O(N^4)$</p>
<p>$30pts$</p>
<p>枚举左上角和矩形长度，二分宽度统计, $O(N^3logN)$</p>
<p>$50pts$</p>
<p>枚举左下角的行，统计对应行每一列往上最多可以走多少行。然后双指针移动确定左右边界，单调队列维护区间内往上走多走的行数的最小值，区间长乘以最小值即为矩形面积，$O(N^3)$</p>
<p>$100pts$</p>
<p>预处理每个位置往上左右能够拓展的长度，然后自上而下统计每个为1的位置能够构成的矩形的最大值，具体参见代码，比较好理解，$O(N^2)$。</p>
<h2 id="Std"><a href="#Std" class="headerlink" title="$Std$"></a>$Std$</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e3</span>+<span class="number">100</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> g[N][N];</span><br><span class="line"><span class="keyword">int</span> u[N][N];</span><br><span class="line"><span class="keyword">int</span> l[N][N];</span><br><span class="line"><span class="keyword">int</span> r[N][N];</span><br><span class="line"><span class="keyword">int</span> hh,ll,rr,bb;</span><br><span class="line"><span class="keyword">char</span> str[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,str+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j =<span class="number">1</span>;j&lt;=m;j++ )&#123;</span><br><span class="line">            <span class="keyword">if</span>(str[j] == <span class="string">'1'</span>) g[i][j] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> g[i][j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">            u[i][j] = l[i][j] = r[i][j] = <span class="number">0</span>;</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(g[i][j] == <span class="number">0</span>)    <span class="keyword">continue</span>;</span><br><span class="line">                u[i][j] = g[i<span class="number">-1</span>][j] == <span class="number">1</span> ? u[i<span class="number">-1</span>][j] : i;</span><br><span class="line">                l[i][j] = g[i][j<span class="number">-1</span>] == <span class="number">1</span> ? l[i][j<span class="number">-1</span>] : j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = m; j &gt;= <span class="number">1</span>; j--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(g[i][j] == <span class="number">0</span>)    <span class="keyword">continue</span>;</span><br><span class="line">            r[i][j] = g[i][j+<span class="number">1</span>] == <span class="number">1</span> ? r[i][j+<span class="number">1</span>] : j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(g[i][j] == <span class="number">0</span>)    <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(g[i<span class="number">-1</span>][j] == <span class="number">1</span>)&#123;</span><br><span class="line">                l[i][j] = max(l[i][j], l[i<span class="number">-1</span>][j]);</span><br><span class="line">                r[i][j] = min(r[i][j], r[i<span class="number">-1</span>][j]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(ans&lt;(r[i][j]-l[i][j]+<span class="number">1</span>)*(i-u[i][j]+<span class="number">1</span>))&#123;</span><br><span class="line">                hh = u[i][j] , bb =i;</span><br><span class="line">                rr = r[i][j],ll=l[i][j];</span><br><span class="line">                ans = (r[i][j]-l[i][j]+<span class="number">1</span>)*(i-u[i][j]+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans2 = <span class="number">0</span>;</span><br><span class="line">    ans2= max(ans2,(rr - ll) * (bb - hh + <span class="number">1</span>));</span><br><span class="line">    ans2= max(ans2,(rr - ll +<span class="number">1</span>) * (bb - hh ));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(g[i][j] == <span class="number">0</span>)    <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(hh==u[i][j]&amp;&amp;bb==i&amp;&amp;ll==l[i][j]&amp;&amp;rr==r[i][j])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(ans2&lt;(r[i][j]-l[i][j]+<span class="number">1</span>)*(i-u[i][j]+<span class="number">1</span>))&#123;</span><br><span class="line">                ans2=(r[i][j]-l[i][j]+<span class="number">1</span>)*(i-u[i][j]+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/08/Test-2019-8-7/" data-id="cjzgyf5jv0003scqd2ryv1pdk" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Test2019-8-8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/08/Test2019-8-8/" class="article-date">
  <time datetime="2019-08-08T08:42:49.000Z" itemprop="datePublished">2019-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/08/Test2019-8-8/">Test2019.8.8 </a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="P1-数列"><a href="#P1-数列" class="headerlink" title="$P1$ 数列"></a>$P1$ 数列</h1><h2 id="Description"><a href="#Description" class="headerlink" title="$Description$"></a>$Description$</h2><p>$F[n]=F[n / 2]+F[n / 3]+F[n / 5]+F[n / 7] (n&lt;=1e12)$</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="$Solution$"></a>$Solution$</h2><h3 id="50pts"><a href="#50pts" class="headerlink" title="$50pts$"></a>$50pts$</h3><p>直接线性预处理。</p>
<h3 id="70pts"><a href="#70pts" class="headerlink" title="$70pts$"></a>$70pts$</h3><p>线性预处理1000万项，对于大于1000万的n，递归求解。</p>
<h3 id="100pts-："><a href="#100pts-：" class="headerlink" title="$100pts$："></a>$100pts$：</h3><p>在递归的同时，用哈希记录之前计算的数值，每次递归到一个之前算过的数值，则直接使用，相当于记忆化搜索。</p>
<h2 id="Std"><a href="#Std" class="headerlink" title="$Std$"></a>$Std$</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> file(x) freopen(#x<span class="meta-string">".in"</span>,<span class="meta-string">"r"</span>,stdin),freopen(#x<span class="meta-string">".out"</span>,<span class="meta-string">"w"</span>,stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10000000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">map</span>&lt;LL,LL&gt; mp;</span><br><span class="line"><span class="keyword">int</span> f[N];</span><br><span class="line"><span class="function">LL <span class="title">zxy</span><span class="params">(LL i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i&lt;<span class="number">10000000</span>) <span class="keyword">return</span> f[i];</span><br><span class="line">    <span class="keyword">if</span> (mp[i]!=<span class="number">0</span>) <span class="keyword">return</span> mp[i];</span><br><span class="line">    mp[i]=zxy(i/<span class="number">2</span>)+zxy(i/<span class="number">3</span>)+zxy(i/<span class="number">5</span>)+zxy(i/<span class="number">7</span>);</span><br><span class="line">    <span class="keyword">return</span> mp[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    file(G:/data9);</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    LL n;</span><br><span class="line">    f[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    f[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;N;i++) f[i]=f[i/<span class="number">2</span>]+f[i/<span class="number">3</span>]+f[i/<span class="number">5</span>]+f[i/<span class="number">7</span>];</span><br><span class="line">    <span class="keyword">while</span> (T--) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,zxy(n));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="P2-背包"><a href="#P2-背包" class="headerlink" title="$P2$ 背包"></a>$P2$ 背包</h1><h2 id="Description-1"><a href="#Description-1" class="headerlink" title="$Description$"></a>$Description$</h2><p>框架同<a href="https://www.luogu.org/problem/P1432" target="_blank" rel="noopener">$P1432$ 倒水问题</a></p>
<p>$C_aC_b$不互质，且$&lt;=1e9$</p>
<p>$Drop$：把其中一个书包里面的所有书拿出来。</p>
<p>$Add$：不断地往一个书包里面装书，直到达到书包的数量上限。</p>
<p>$Transfer$：把其中一个书包里的书尽量的装到另外一个书包里面，直到那个书包装不下书或者没有书可以放。</p>
<h2 id="Solution-1"><a href="#Solution-1" class="headerlink" title="$Solution$"></a>$Solution$</h2><h3 id="30pts"><a href="#30pts" class="headerlink" title="$30pts$"></a>$30pts$</h3><p>直接暴力搜索</p>
<h3 id="50pts-1"><a href="#50pts-1" class="headerlink" title="$50pts$"></a>$50pts$</h3><p>搜索，用背包当前装书的数量作为状态进行搜索，不搜索重复状态，复杂度$O(N^2)$</p>
<h3 id="100pts"><a href="#100pts" class="headerlink" title="$100pts$"></a>$100pts$</h3><p>首先，当$c&gt;a$且$c&gt;b$的时候，显然无法完成。然后我们考虑整体，书增加的方式只能通过往两个书包里面放书直到放满。所以如果可以使得一个数量达到$c$，那么一定有$ax+by=c$，根据裴蜀定理，只需要判断$gcd(a,b)$是否是$c$的因子即可。</p>
<p>然后考虑最小操作数。根据裴蜀定理，因为$c&lt;=max(a,b)$所以$x$和$y$肯定一正一负或者一正一零。我们不妨设$x&gt;0$，则最少操作数流程如下：</p>
<p>$1.$给$A$加满书(对应增加一个$a$)</p>
<p>$2.A$转移到$B$</p>
<p>$3.B$如果满，那么把所有的拿出来(对应减去一个$b$)</p>
<p>$4.$如果$A$非空，那么重复$2-4$</p>
<p>$5.$从$1$开始重复整个过程，直到$A$或$B$中书的数量为$c$</p>
<p>如果$c&gt;a$，则最终B里面会先有$c$的本书，因为$A$存不下，这种情况下$x$次$ADD$，$-y$次$Drop$，$x-y$次转移，总共$2x-2y$次操作。</p>
<p>如果$c&lt;=a$，假设$B$先有$c$本书，则$b&gt;=c$，又$c&lt;=max(a,b)$，所以$a$和至少一个等于$c$，此时操作数为$1$；假设$A$先有$c$本书，则有$x$次$ADD$，$x-y-1$次转移，$-y-1$次$Drop$。$Drop$是$-y-1$次是因为当发现$A$有$c$的时候，$B$虽然满了但是为了操作数少可以不拿出来。因此此时操作数为$2x-2y-2$次。</p>
<p>综上，我们要最小化$|x|+|y|$。用扩展欧几里得定理找到和$0$最近的两组$(x,y)$，然后比较即可。</p>
<h2 id="Std-1"><a href="#Std-1" class="headerlink" title="$Std$"></a>$Std$</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">gcd</span><span class="params">(LL a, LL b, LL &amp;x, LL &amp;y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    LL q = gcd(b, a % b, y, x);</span><br><span class="line">    y -= a / b * x;</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	freopen(<span class="string">"data.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line">	freopen(<span class="string">"data.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--)</span><br><span class="line">    &#123;</span><br><span class="line">        LL a, b, c, x, y;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">        <span class="keyword">int</span> d = gcd(a, b, x, y);</span><br><span class="line">        <span class="keyword">if</span> (c &gt; a &amp;&amp; c &gt; b || c % d)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (c == a || c == b)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (y &gt; <span class="number">0</span>) swap(x, y), swap(a, b);</span><br><span class="line">        LL a2 = a / d, b2 = b / d;</span><br><span class="line">        x *= c / d, y *= c / d;</span><br><span class="line">        LL k = x / b2;</span><br><span class="line">        x -= k * b2, y += k * a2;</span><br><span class="line">        LL res;</span><br><span class="line">        <span class="keyword">if</span> (c &gt; a) res = <span class="number">2</span> * (x - y);</span><br><span class="line">        <span class="keyword">else</span> res = <span class="number">2</span> * (x - y - <span class="number">1</span>);</span><br><span class="line">        x -= b2, y += a2;</span><br><span class="line">        <span class="keyword">if</span> (c &gt; b) res = min(res, <span class="number">2</span> * (y - x));</span><br><span class="line">        <span class="keyword">else</span> res = min(res, <span class="number">2</span> * (y - x - <span class="number">1</span>));</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="T3-战场"><a href="#T3-战场" class="headerlink" title="$T3$ 战场"></a>$T3$ 战场</h1><h2 id="Description-2"><a href="#Description-2" class="headerlink" title="$Description$"></a>$Description$</h2><p>求基环树上任意两点之间颜色数目为奇数的最大颜色数。</p>
<h2 id="Solution-2"><a href="#Solution-2" class="headerlink" title="$Solution$"></a>$Solution$</h2><h3 id="30pts-1"><a href="#30pts-1" class="headerlink" title="$30pts$"></a>$30pts$</h3><p>建图，对于每个询问暴力做。</p>
<h3 id="70pts-1"><a href="#70pts-1" class="headerlink" title="$70pts$"></a>$70pts$</h3><p>由于颜色数目小于等于$50$，所以我们考虑用一个$long long$变量表示某个颜色出现次数的奇偶性。<br>基环树，我们可考虑看作两部分，一部分是环上的点，一部分是非环上的点。首先，我们找到环上的点并标记，然后以其中一个点作为起点计算前缀异或和$s[]$。</p>
<p>对于环上第$x$个点和第$y$个点$(y&gt;x)$的答案，我们假设环上有$m$个点，那么有两条路可以比较，一是直接$s[y]$^$s[x-1]$直接求区间异或和，而是多转一圈，那就是$s[m]$^$s[y-1]$^$s[x]$。比较两个哪个含$1$的位数多即可。</p>
<p>对于询问中存在不在环上的点的情况，我们对每个不在环上的点维护它距离它最近的环上点的距离。显然，如果环上的连接着除环上点以外的点，那么这些点一定构成一棵树，而这个环上的点就是树的根。所以，首先判断两个点是否在同一棵树下，即最近的环上点是否相同。如果相同，那么只有一种答案，就是树中两点直接路径。如果不同，那么可以分为三个部分，前两个部分是两个点分别到各自最近的环上点的异或和，第三部分就是两个环上点的两种异或和，比较一下大小即可。</p>
<p>对于环上的点，前缀异或和维护；对于非环上的点，树链剖分加树状数组维护。时间复杂度$O(NlogN)$。</p>
<h3 id="100pts-1"><a href="#100pts-1" class="headerlink" title="$100pts$"></a>$100pts$</h3><p>$bitset$</p>
<h2 id="Std-2"><a href="#Std-2" class="headerlink" title="$Std$"></a>$Std$</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x,n) memset(x,0,sizeof(x[0])*(n+5))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> file(x) freopen(#x<span class="meta-string">".in"</span>,<span class="meta-string">"r"</span>,stdin),freopen(#x<span class="meta-string">".out"</span>,<span class="meta-string">"w"</span>,stdout)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">5e5</span>+<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> IO</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> len=<span class="number">1e7</span>;<span class="keyword">char</span> buf[len];<span class="keyword">int</span> sz,p;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">begin</span><span class="params">()</span></span>&#123;p=<span class="number">0</span>;sz=fread(buf,<span class="number">1</span>,len,<span class="built_in">stdin</span>);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (p==sz)<span class="keyword">return</span> <span class="number">0</span>;<span class="keyword">int</span> f=<span class="number">1</span>,d=<span class="number">0</span>;<span class="keyword">char</span> s=buf[p++];</span><br><span class="line">        <span class="keyword">while</span>(s&lt;<span class="string">'0'</span>||s&gt;<span class="string">'9'</span>&amp;&amp;p&lt;sz)&#123;<span class="keyword">if</span>(s==<span class="string">'-'</span>) f=<span class="number">-1</span>;s=buf[p++];&#125;</span><br><span class="line">        <span class="keyword">while</span>(s&gt;=<span class="string">'0'</span>&amp;&amp;s&lt;=<span class="string">'9'</span>&amp;&amp;p&lt;sz)&#123;d=d*<span class="number">10</span>+s-<span class="string">'0'</span>;s=buf[p++];&#125;</span><br><span class="line">        x=f*d; <span class="keyword">return</span> p!=sz;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">writeln</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="number">0</span>)&#123;<span class="built_in">putchar</span>(<span class="string">'0'</span>);<span class="built_in">putchar</span>(<span class="string">'\n'</span>);<span class="keyword">return</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(x&lt;<span class="number">0</span>)<span class="built_in">putchar</span>(<span class="string">'-'</span>),x=-x;<span class="keyword">int</span> len=<span class="number">0</span>,buf[<span class="number">20</span>];</span><br><span class="line">        <span class="keyword">while</span>(x)buf[len++]=x%<span class="number">10</span>,x/=<span class="number">10</span>;<span class="keyword">int</span> i=len<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i&gt;=<span class="number">0</span>)&#123;<span class="built_in">putchar</span>(buf[i--]+<span class="string">'0'</span>);&#125;<span class="built_in">putchar</span>(<span class="string">'\n'</span>);<span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> lc[N],rc[N],top[N],size[N],son[N],fa[N],dep[N];</span><br><span class="line"><span class="keyword">int</span> ls[N],on[N],f[N],id[N],hid[N],num;</span><br><span class="line"><span class="keyword">int</span> n,m,tot,e;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>&#123;</span><span class="keyword">int</span> x,y,w,nxt;&#125; g[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> d,<span class="keyword">int</span> f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    son[u]=<span class="number">0</span>; dep[u]=d; size[u]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=ls[u];i;i=g[i].nxt)</span><br><span class="line">        <span class="keyword">if</span> (g[i].y!=f)</span><br><span class="line">        &#123;</span><br><span class="line">            fa[g[i].y]=u;</span><br><span class="line">            dfs1(g[i].y,d+<span class="number">1</span>,u);</span><br><span class="line">            size[u]+=size[g[i].y];</span><br><span class="line">            <span class="keyword">if</span> (size[g[i].y]&gt;size[son[u]]) son[u]=g[i].y;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    top[u]=f; lc[u]=++num;</span><br><span class="line">    <span class="keyword">if</span> (son[u]) dfs2(son[u],f);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=ls[u];i;i=g[i].nxt)</span><br><span class="line">        <span class="keyword">if</span> (g[i].y!=son[u]&amp;&amp;g[i].y!=fa[u]) dfs2(g[i].y,g[i].y);</span><br><span class="line">    rc[u]=num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">LCA</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tp1=top[u],tp2=top[v];</span><br><span class="line">    <span class="keyword">while</span> (tp1!=tp2)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (dep[tp1]&lt;dep[tp2]) swap(tp1,tp2),swap(u,v);</span><br><span class="line">        u=fa[tp1]; tp1=top[u];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (dep[u]&gt;dep[v]) swap(u,v);</span><br><span class="line">    <span class="keyword">return</span> u;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> w)</span></span>&#123;g[++e]=Edge&#123;x,y,w,ls[x]&#125;;ls[x]=e;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BinaryIndexedTree</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="built_in">bitset</span>&lt;1001&gt; c[N];</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> x&amp;-x;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;<span class="built_in">memset</span>(c,<span class="number">0</span>,<span class="keyword">sizeof</span>(c));&#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x,<span class="built_in">bitset</span>&lt;<span class="number">1001</span>&gt; k)</span></span>&#123;<span class="keyword">for</span>(;x&lt;=n;x+=lowbit(x)) c[x]^=k;&#125;</span><br><span class="line">    <span class="keyword">inline</span> <span class="built_in">bitset</span>&lt;1001&gt; getsum(<span class="keyword">int</span> x)&#123;<span class="built_in">bitset</span>&lt;1001&gt; ans;<span class="keyword">for</span>(;x&gt;<span class="number">0</span>;x-=lowbit(x))ans^=c[x];<span class="keyword">return</span> ans;&#125;</span><br><span class="line"></span><br><span class="line">&#125; BIT[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> father,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=ls[x];i;i=g[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (g[i].y==father) <span class="keyword">continue</span>;</span><br><span class="line">        fa[g[i].y]=x;</span><br><span class="line">        <span class="keyword">if</span> (g[i].y==y)</span><br><span class="line">        &#123;</span><br><span class="line">            on[y]=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=x;j!=<span class="number">0</span>;j=fa[j])</span><br><span class="line">                on[j]=<span class="number">1</span>; <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (dfs(g[i].y,x,y)) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> f[x]==x?x:f[x]=find(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">expand</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa,<span class="keyword">int</span> ff)</span>                <span class="comment">//对环上的每一个点拓展</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    id[x]=ff;                                    <span class="comment">//id标记为对应的起点，即距离最近的环上点</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=ls[x];i;i=g[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (on[g[i].y]||g[i].y==fa) <span class="keyword">continue</span>;            <span class="comment">//只走非环上的点</span></span><br><span class="line">        <span class="built_in">bitset</span>&lt;1001&gt; tmp; tmp.<span class="built_in">set</span>(g[i].w);</span><br><span class="line">        BIT[<span class="number">1</span>].update(lc[g[i].y],tmp);                <span class="comment">//维护树状数组</span></span><br><span class="line">        BIT[<span class="number">1</span>].update(rc[g[i].y]+<span class="number">1</span>,tmp);</span><br><span class="line">        expand(g[i].y,x,ff);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">circle</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa,<span class="built_in">bitset</span>&lt;<span class="number">1001</span>&gt; dist)</span>                <span class="comment">//对环上的点重标号，并且维护树状数组</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    hid[x]=++tot;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=ls[x];i;i=g[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (g[i].y==fa||!on[g[i].y]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">bitset</span>&lt;1001&gt; tmp=dist; tmp.flip(g[i].w);</span><br><span class="line">        BIT[<span class="number">0</span>].update(tot+<span class="number">1</span>,tmp);</span><br><span class="line">        BIT[<span class="number">0</span>].update(tot+<span class="number">2</span>,tmp);</span><br><span class="line">        circle(g[i].y,x,tmp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    file(G:/data0);</span><br><span class="line">    IO::begin();</span><br><span class="line">    <span class="keyword">int</span> root=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">bitset</span>&lt;1001&gt; sum;</span><br><span class="line">    IO::read(n); IO::read(m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i]=i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x,y,w; IO::read(x);</span><br><span class="line">        IO::read(y); IO::read(w);</span><br><span class="line">        <span class="keyword">if</span> (find(x)!=find(y))                        <span class="comment">//如果二者不连通，直接加</span></span><br><span class="line">        &#123;</span><br><span class="line">            f[find(x)]=find(y);</span><br><span class="line">            addedge(x,y,w);</span><br><span class="line">            addedge(y,x,w);</span><br><span class="line">        &#125; <span class="keyword">else</span>                                <span class="comment">//如果已经连通，说明找到了环，记下root</span></span><br><span class="line">        &#123;                                        <span class="comment">//同时dfs遍历环上的点，标记为在环上</span></span><br><span class="line">            sum.<span class="built_in">set</span>(w),dfs(root=x,<span class="number">0</span>,y);</span><br><span class="line">            g[++e]=Edge&#123;x,y,w,<span class="number">0</span>&#125;;</span><br><span class="line">            g[++e]=Edge&#123;y,x,w,<span class="number">0</span>&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs1(root,<span class="number">0</span>,<span class="number">0</span>);                            <span class="comment">//树链剖分</span></span><br><span class="line">    dfs2(root,root);                            <span class="comment">//标记每个点及其子树的编号范围lc和rc</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span> (on[i]) expand(i,fa[i],i);            <span class="comment">//对于每一个环上的点进行拓展</span></span><br><span class="line">    circle(root,<span class="number">0</span>,<span class="number">0</span>); sum^=BIT[<span class="number">0</span>].getsum(tot);    <span class="comment">//重标号环上的点</span></span><br><span class="line">    <span class="keyword">while</span>(m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> op,x,y; IO::read(op);</span><br><span class="line">        IO::read(x); IO::read(y);</span><br><span class="line">        <span class="keyword">if</span> (op==<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            x&lt;&lt;=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> a=g[x].x,b=g[x].y;</span><br><span class="line">            <span class="keyword">if</span> (dep[a]&gt;dep[b]) swap(a,b);</span><br><span class="line">            <span class="built_in">bitset</span>&lt;1001&gt; tmp; tmp.<span class="built_in">set</span>(g[x].w); tmp.flip(y);</span><br><span class="line">            <span class="keyword">if</span> (on[a]==<span class="number">1</span>&amp;&amp;on[b]==<span class="number">1</span>)               <span class="comment">//若两个点都在换上，那么修改树状数组0</span></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (dep[b]-dep[a]&lt;=<span class="number">1</span>) BIT[<span class="number">0</span>].update(hid[b],tmp);</span><br><span class="line">                sum^=tmp;</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">            &#123;                                       <span class="comment">//否则修改树状数组1</span></span><br><span class="line">                BIT[<span class="number">1</span>].update(lc[b],tmp);</span><br><span class="line">                BIT[<span class="number">1</span>].update(rc[b]+<span class="number">1</span>,tmp);</span><br><span class="line">            &#125;</span><br><span class="line">            g[x].w=y;</span><br><span class="line">        &#125; <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (find(x)!=find(y))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (dep[x]&gt;dep[y]) swap(x,y);</span><br><span class="line">            <span class="keyword">if</span> (id[x]!=id[y])                <span class="comment">//距离最近的环上点不相同，则分为三部分</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> l=min(hid[id[x]],hid[id[y]]);</span><br><span class="line">                <span class="keyword">int</span> r=max(hid[id[x]],hid[id[y]]);</span><br><span class="line">                <span class="built_in">bitset</span>&lt;1001&gt; tmp=BIT[<span class="number">0</span>].getsum(r)^BIT[<span class="number">0</span>].getsum(l);    <span class="comment">//环上点之间的距离</span></span><br><span class="line">                <span class="built_in">bitset</span>&lt;1001&gt; a=BIT[<span class="number">1</span>].getsum(lc[x]);       <span class="comment">//x距离其最近环上点的距离</span></span><br><span class="line">                <span class="built_in">bitset</span>&lt;1001&gt; b=BIT[<span class="number">1</span>].getsum(lc[y]);        <span class="comment">//y距离其最近的环上点的距离</span></span><br><span class="line">                a^=b^tmp; b=a^sum;</span><br><span class="line">                IO::writeln((<span class="keyword">int</span>)max(a.count(),b.count()));</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">bitset</span>&lt;<span class="number">1001</span>&gt; a=BIT[<span class="number">1</span>].getsum(lc[x]);</span><br><span class="line">                <span class="built_in">bitset</span>&lt;1001&gt; b=BIT[<span class="number">1</span>].getsum(lc[y]);</span><br><span class="line">                a^=b; IO::writeln((<span class="keyword">int</span>)a.count());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/08/Test2019-8-8/" data-id="cjzgyf5kd0006scqdpcbaukjm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-P3177 [HAOI2015]TreeDye" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/07/P3177 [HAOI2015]TreeDye/" class="article-date">
  <time datetime="2019-08-07T09:55:21.000Z" itemprop="datePublished">2019-08-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/07/P3177 [HAOI2015]TreeDye/">洛谷P3177 [HAOI2015]树上染色</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Description"><a href="#Description" class="headerlink" title="$Description$"></a><a href="https://www.luogu.org/problem/P3177" target="_blank" rel="noopener">$Description$</a></h2><h2 id="Solution"><a href="#Solution" class="headerlink" title="$Solution$"></a><a href="https://www.luogu.org/blog/ahaha254/solution-p3177" target="_blank" rel="noopener">$Solution$</a></h2><p>分开计算每条边的贡献。</p>
<p>边对点产生贡献，当且仅当边的两端都有点。</p>
<p>于是对于$(u,fa)$，$u$的子树选中了$x$个点，我们可以分开计算白点和黑点的贡献$sum:$</p>
<p>$sum_{(u,fa)}=x(k-x)+(size[u]-x)(n-size[u]-k+x)$</p>
<p>$dp[fa][x]=dp[fa][x-y]+dp[v][y]+sum_{(u,fa)}w_{(u,fa)}$</p>
<p>把$u$打成$y$水过两个点$QWQ$</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> siz[MAXN] = &#123;<span class="number">0</span>&#125;, h[MAXN];</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>, N, K;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">E</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> t, val, nxt;</span><br><span class="line">&#125;Ed[<span class="number">2</span> * MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> f, <span class="keyword">int</span> t, <span class="keyword">int</span> val)</span></span>&#123;Ed[++cnt].t = t; Ed[cnt].nxt = h[f]; Ed[cnt].val = val; h[f] = cnt;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	siz[k] = <span class="number">1</span>; dp[k][<span class="number">0</span>] = dp[k][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = h[k]; i; i = Ed[i].nxt)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> u = Ed[i].t; <span class="keyword">if</span> (u == fa) <span class="keyword">continue</span>;</span><br><span class="line">		dfs(u, k); siz[k] += siz[u];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="built_in">std</span>::min(siz[k], K); x &gt;= <span class="number">0</span>; x--)</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">0</span>; y &lt;= <span class="built_in">std</span>::min(x, siz[u]); y++)</span><br><span class="line">			&#123; </span><br><span class="line">				<span class="keyword">if</span> (dp[k][x - y] == <span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">				<span class="keyword">long</span> <span class="keyword">long</span> sum = <span class="number">1L</span>L * (K - y) * y + <span class="number">1L</span>L * (siz[u] - y) * (N - siz[u] - K + y) ;</span><br><span class="line">				dp[k][x] = <span class="built_in">std</span>::max(dp[k][x - y] + dp[u][y] + sum * Ed[i].val, dp[k][x]);</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">rd</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ret = <span class="number">0</span>; <span class="keyword">char</span> ch = getchar();</span><br><span class="line">	<span class="keyword">while</span>(!<span class="built_in">isdigit</span>(ch)) ch = getchar();</span><br><span class="line">	<span class="keyword">for</span>(; <span class="built_in">isdigit</span>(ch); ch = getchar()) ret = ret * <span class="number">10</span> + (<span class="keyword">int</span>)ch - <span class="number">48</span>;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	freopen(<span class="string">"Tarly.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line">	N = rd(), K = rd();</span><br><span class="line">	<span class="built_in">memset</span>(dp, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> f = rd(), t = rd(), v = rd(); </span><br><span class="line">		Add(f, t, v); Add(t, f, v);</span><br><span class="line">	&#125;</span><br><span class="line">	dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, dp[<span class="number">1</span>][K]);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/07/P3177 [HAOI2015]TreeDye/" data-id="cjzgyf5ju0002scqdu23lybhu" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Hexo-NexT" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/07/Hexo-NexT/" class="article-date">
  <time datetime="2019-08-07T09:02:49.000Z" itemprop="datePublished">2019-08-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/07/Hexo-NexT/">Hexo-NexT主题搭建笔记 </a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://aturics.github.io" target="_blank" rel="noopener">$MyGithubBlog$</a></p>
<p><a href="https://blog.csdn.net/sinat_37781304/article/details/82729029" target="_blank" rel="noopener">$hexo$史上最全搭建教程-$zjufangzh$</a></p>
<p>亲测教程可行，但是主题部分略有缺憾。</p>
<p><a href="https://ouuan.github.io/hexo博客搭建指北/" target="_blank" rel="noopener">$hexo$博客搭建指北-$ouuan$</a></p>
<p>关于$NexT$主题的美化很全。但$Gitalk$部分建议自行百度。</p>
<p>$Gitalk$弄了两次还是$Error:Not;Found…$</p>
<p>乱码解决方案：记事本-文件（F）-另存为（A）-编码（E）改为$UTF-8$</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/07/Hexo-NexT/" data-id="cjzgyf5jm0000scqd55kt6lnx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-SAStudyAccount" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/06/SAStudyAccount/" class="article-date">
  <time datetime="2019-08-06T09:59:21.000Z" itemprop="datePublished">2019-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/06/SAStudyAccount/">模拟退火（SA）学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>引用：<a href="https://m-sea.blog.luogu.org/qian-tan-SA" target="_blank" rel="noopener">浅谈$SA-M$_$sea$</a></p>
<p><a href="https://99nl.blog.luogu.org/guan-yu-mu-ni-tui-huo-di-xue-xi-bi-ji" target="_blank" rel="noopener">$SA$学习笔记-$99NL$</a></p>
<h2 id="退火流程："><a href="#退火流程：" class="headerlink" title="退火流程："></a>退火流程：</h2><p>$1.$由上一次接受的解$pre$出发，随机得到一个可能解$x$。</p>
<p>$2.$若当前解优于最优解$ans$，覆盖最优解。</p>
<p>$3.$否则$x$将会以$exp(delta/T)$的概率成为下一次的$pre$。</p>
<p>$4.T*\Delta$降温。</p>
<h2 id="Theta"><a href="#Theta" class="headerlink" title="$\Theta(???)$"></a>$\Theta(???)$</h2><p>“一般降温系数 $\Delta$ 与 $1$ 的差减少一个数量级, 耗时大约多 $10$ 倍；$T_0$和$T_k$变化一个数量级, 耗时不会变化很大。”</p>
<p>$by;M$_$sea$</p>
<h2 id="实现细节"><a href="#实现细节" class="headerlink" title="实现细节"></a>实现细节</h2><p>$1.$降温系数取$[0.95,0.997]$左右。</p>
<p>$2.$如何生成新解？</p>
<p>坐标系内：随机生成一个点，或者生成一个向量。</p>
<p>序列问题：$random;shuffle$ 或者随机交换两个数。</p>
<p>网格问题：可以看做二维序列，每次交换两个格子即可。</p>
<p>$by;M$_$sea$</p>
<p>$3.$如果想多跑几次….</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MAX_TIME = <span class="number">0.7</span>~<span class="number">0.8</span></span><br><span class="line"><span class="keyword">while</span> ((<span class="keyword">double</span>)clock()/CLOCKS_PER_SEC&lt;MAX_TIME) SA();</span><br></pre></td></tr></table></figure>

<p>实测<a href="https://www.luogu.org/record/22257195" target="_blank" rel="noopener">$P1337[JSOI2004]$平衡点 / 吊打$XXX$评测记录</a> $0.6-&gt;TLE$</p>
<p>$4.WA?$</p>
<p>不同的$\Delta$、$T_0$、$T_k$甚至$srand()$和$SA$的次数都会影响到答案。</p>
<p>$by;M$_$sea$</p>
<p>$About:srand()$</p>
<p>你可以这样写：</p>
<p>$srand((unsigned)time(NULL))/srand(19260817)$</p>
<p>再$srand(rand())$几次。</p>
<h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><p><a href="https://www.luogu.org/problem/P1337" target="_blank" rel="noopener">$P1337[JSOI2004]$平衡点 / 吊打$XXX$</a></p>
<p>$1.$势能的计算：$len*w$（$len:$绳在桌面上的长度）</p>
<p>原理：绳子总长不变，$len$越大，物体越高。</p>
<p>$2.$横纵坐标的增量：$((rand() &lt;&lt; 1) - RAND$_$MAX) * T$</p>
<p>$((rand() &lt;&lt; 1) - RAND$_$MAX)$得到介于$[-RAND$ _ $MAX,RAND$ _ $MAX-1]$之间的随机数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-14</span>, del = <span class="number">0.992</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> N;</span><br><span class="line"><span class="keyword">double</span> ansx, ansy, ans = <span class="number">1e18</span>;</span><br><span class="line"><span class="keyword">int</span> x[MAXN], y[MAXN], w[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">calcEp</span><span class="params">(<span class="keyword">double</span> nx, <span class="keyword">double</span> ny)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> ret = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">double</span> dx = nx - x[i], dy = ny - y[i];</span><br><span class="line">		ret += <span class="built_in">sqrt</span>(dx * dx + dy * dy) * (<span class="keyword">double</span>)w[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SA</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> T = <span class="number">1926</span>, tx = ansx, ty = ansy;</span><br><span class="line">	<span class="keyword">while</span> (T &gt; eps)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">double</span> nx = tx + ((rand() &lt;&lt; <span class="number">1</span>) - RAND_MAX) * T;</span><br><span class="line">		<span class="keyword">double</span> ny = ty + ((rand() &lt;&lt; <span class="number">1</span>) - RAND_MAX) * T;</span><br><span class="line">		<span class="keyword">double</span> c = calcEp(nx, ny); <span class="keyword">double</span> d = c - ans;</span><br><span class="line">		<span class="keyword">if</span> (d &lt; eps) &#123;ansx = nx, ansy = ny; ans = c; tx = nx, ty = ny;&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">exp</span>(-d / T) * RAND_MAX &gt; rand())&#123;tx = nx, ty = ny;&#125;</span><br><span class="line">		T *= del;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">calc</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) ansx += x[i], ansy += y[i];</span><br><span class="line">	ansx /= N, ansy /= N;</span><br><span class="line">	SA(); SA(); SA(); SA(); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	srand(<span class="number">19260817</span>); srand(rand());</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;N);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x[i], &amp;y[i], &amp;w[i]);</span><br><span class="line">	calc();</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%.3lf %.3lf\n"</span>, ansx, ansy);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/08/06/SAStudyAccount/" data-id="cjzgyf5kb0005scqdxfz4fngu" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/08/15/recommend/">一些好用的软件/网址推荐!</a>
          </li>
        
          <li>
            <a href="/2019/08/15/HexoFixed/">hexo修复笔记</a>
          </li>
        
          <li>
            <a href="/2019/08/08/Test-2019-8-7/">Test2019.8.7</a>
          </li>
        
          <li>
            <a href="/2019/08/08/Test2019-8-8/">Test2019.8.8 </a>
          </li>
        
          <li>
            <a href="/2019/08/07/P3177 [HAOI2015]TreeDye/">洛谷P3177 [HAOI2015]树上染色</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>